<div class="flex align-items-start justify-center min-h-screen bg-gray-100 pt-24">
  <div class="bg-white rounded-2xl shadow-lg p-10 w-full max-w-md h-max mt-20">
    <h2 class="text-3xl font-bold mb-8 text-blue-900">Nuevo caso</h2>
    <form [formGroup]="casoForm" (ngSubmit)="submitCaso()" novalidate>
      <div class="mb-6">
        <label
          class="block text-lg font-semibold text-gray-700 mb-2"
          for="descripcion"
          >Descripci√≥n</label
        >
        <input
          id="nombre"
          type="text"
          formControlName="nombre"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-400"
          placeholder=""
        />
        @if (casoForm.get('nombre')?.invalid && enviado) {
        <div class="text-red-500 text-sm mt-1">
          El nombre es obligatorio
        </div>
        }
      </div>
      <div class="mb-6">
        <label
          class="block text-lg font-semibold text-gray-700 mb-2"
          for="partePolicial"
          >Parte policial</label
        >
        <div
          class="flex items-center border border-gray-300 rounded-lg px-4 py-2 bg-white"
        >
          <input
            id="partePolicial"
            type="file"
            accept="application/pdf"
            (change)="onFileChange($event)"
            class="flex-1 text-gray-700 focus:outline-none"
          />
        </div>
        @if (enviado && casoForm.get('partePolicial')?.invalid) {
        <div class="text-red-500 text-sm mt-1">Adjunte un archivo PDF.</div>
        }
      </div>
      <div class="mb-8">
        <label
          class="block text-lg font-semibold text-gray-700 mb-2"
          for="tipoDelito"
          >Tipo de delito</label
        >
        <select
          id="tipoDelito"
          formControlName="tipoDelito"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-400"
        >
          <option value="robo">Robo</option>
          <option value="fraude">Fraude</option>
          <option value="acoso">Acoso</option>
          <option value="otros">Otros</option>
        </select>
        @if (enviado && casoForm.get('tipoDelito')?.invalid) {
        <div class="text-red-500 text-sm mt-1">
          Seleccione un tipo de delito.
        </div>
        }
      </div>
      @if (errorMsg) {
      <div class="text-red-600 text-center mb-4">
        {{ errorMsg }}
      </div>
      }
      <button
        type="submit"
        class="w-full py-3 rounded-lg text-white text-xl font-semibold bg-gradient-to-r from-[#74409B] to-[#384C81] hover:from-[#5a2f8c] hover:to-[#2d3e6b] transition duration-300 flex items-center justify-center"
      >
        @if (loading) {
        <span class="flex items-center justify-center">
          <svg
            class="animate-spin h-5 w-5 mr-2 text-white"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
            ></path>
          </svg>
          Enviando...
        </span>
        }@else { Crear Caso }
      </button>
    </form>
  </div>
</div>
