<div class="justify-center min-h-screen bg-gray-100 pt-24">
  <div class="max-w-6xl mx-auto bg-white rounded-xl shadow-lg py-10 px-4">
    <h1 class="text-3xl font-bold mb-6 text-blue-900">Historial de Casos</h1>

    <!-- Filtros y Buscador -->
    <form class="flex flex-wrap items-center justify-between gap-4 mb-6" (submit)="onBuscar($event)">
      <div class="flex items-center gap-3">
        <select class="px-4 py-2 border rounded focus:ring-2 focus:ring-blue-400" (change)="onTipoDelitoChange($event)">
          <option>Tipo de delito</option>
          <option *ngFor="let tipo of tiposDelito">{{ tipo }}</option>
        </select>
        <select class="px-4 py-2 border rounded focus:ring-2 focus:ring-blue-400" (change)="onEstadoChange($event)">
          <option>Estado</option>
          <option *ngFor="let est of estados">{{ est }}</option>
        </select>
      </div>
      <div class="flex items-center gap-2">
        <input type="text" placeholder="Buscar por nombre o nÃºmero"
          class="px-4 py-2 border rounded w-64 focus:outline-none focus:ring-2 focus:ring-blue-400" [value]="busqueda"
          (input)="onBusquedaChange($event)" />
        <button type="submit" class="bg-blue-700 text-white px-5 py-2 rounded hover:bg-blue-800">Buscar</button>
      </div>
    </form>

    <!-- Tabla Responsive -->
    <div class="overflow-y-auto bg-gray-50 shadow-md rounded-lg max-h-[550px]">
      <table class="w-full text-sm text-left text-gray-700">
        <thead class="bg-blue-50 text-gray-700 text-xs uppercase">
          <tr>
            <th class="px-6 py-3">Caso</th>
            <th class="px-6 py-3">Delito</th>
            <th class="px-6 py-3">Estado</th>
            <th class="px-6 py-3">Fecha</th>
            <th class="px-6 py-3 text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="cargando">
            <td colspan="5" class="text-center py-6 text-blue-700">Cargando casos...</td>
          </tr>
          <tr *ngIf="!cargando && error">
            <td colspan="5" class="text-center py-6 text-red-600">{{ error }}</td>
          </tr>
          <tr *ngIf="!cargando && !error && casosFiltrados.length === 0">
            <td colspan="5" class="text-center py-6 text-gray-500">No hay casos que coincidan.</td>
          </tr>
          <tr *ngFor="let caso of casosFiltrados" class="border-t hover:bg-gray-50 transition">
            <td class="px-6 py-4 font-medium text-blue-900">{{ caso.nombre }}</td>
            <td class="px-6 py-4">{{ caso.tipoDelito }}</td>
            <td class="px-6 py-4">
              <span [ngClass]="{
              'bg-yellow-100 text-yellow-800': caso.estado === 'En proceso',
              'bg-green-100 text-green-800': caso.estado === 'Sentenciado',
              'bg-gray-200 text-gray-700': !caso.estado
            }" class="inline-block px-3 py-1 text-xs font-semibold rounded-full">{{ caso.estado }}</span>
            </td>
            <td class="px-6 py-4">{{ caso.fecha | date:'dd/MM/yyyy' }}</td>
            <td class="px-6 py-4 text-center">
              <button class="text-blue-600 hover:underline text-sm font-medium">Ver detalle</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>